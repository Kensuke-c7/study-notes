# VPCとは？
VPC（Amazon Virtual Private Cloud）とは、AWS上にプライベート（自分専用）な仮想ネットワーク環境を作成するサービス。
AWSのコア中のコアサービスで、まずはこれを抑えないことにはじまらない。

### VPCの特徴
- VPCに対してIPアドレスレンジ（プライマリCIDRブロック）を割り当てる
  - プライマリCIDRブロックは作成後の変更不可（セカンダリCIDRブロックを追加能）
- VPCは同一リージョンに複数作成可能（デフォルト最大５）
- VPCは同一リージョン内の全AZに跨る

### VPCの機能
- 専用仮想ネットワーク：専用の仮想プライベートクラウド（VPC）を作成できる
- サブネット：VPCを複数のサブネットに分割できる
- ルーティング：ルートテーブルを使ってサブネットやゲートウェイからのネットワークトラフィックのルーティングができる
- ネットワークサービス：DNSやDHCP機能を持つ
- ネットワークセキュリティ：VPCやVPC内のリソースに対してネットワークアクセス制御ができる
- ゲートウェイ：ゲートウェイを使ってインターネットやオンプレと接続できる
- エンドポイント：インターネットに出ることなく、他のAWSサービスにプライベート接続できる
- トラフィックミラーリング：ネットワークインターフェイスからネットワークトラフィックをコピーできる
- VPCフローログ：VPCのネットワークインターフェイスに出入りするトラフィック情報をキャプチャできる
- ピアリング接続：２つのVPC内のリソース間でトラフィックをルーティングできる（１：１接続のみ）
- VPN接続：オンプレとVPN接続できる（AWS Virtual Private Network (AWS VPN)
- 閉域接続：オンプレと閉域接続できる（AWS Direct Connect）
- Transit Gateway：VPC、VPN接続、AWS Direct Connect 接続間のトラフィックをルーティングできる


## サブネット
VPCをCIDR分割したもの（最小/16 ～ 最大/28）。
- サブネットは１つのAZにのみ含まれる（複数のAZに跨ることはできない）
- サブネットに対してルートテーブルを関連づける必要がある（デフォルトでメインルートテーブルが関連づけられる）
- ２つのサブネットタイプ
 - パブリックサブネット：インターネットゲートウェイへの直接ルートがあるサブネット
 - プライベートサブネット：インターネットゲートウェイへの直接ルートがないサブネット
- 予約アドレス：CIDR +1 VPCルータ、+2 DNSサーバ、+3 将来拡張用
- IPv4、IPv6 対応のサブネット作成可能（デュアルスタック可）
- NACLでネットワークアクセス制御ができる


## ルートテーブル
ＶＰＣはルートテーブルを使ってルーティングする。VPC内通信（同一VPC内のサブネット間通信）はデフォルトでＯＫだが、**VPC外通信（インターネット、オンプレ、他VPC）はルートテーブルへのルート設定が必要**。ルートは送信先（宛先ＣＩＤＲ）に対してターゲット（IGW、VGW、NGWなど）を指定する。
- メインルートテーブル：VPC作成時に自動作成される。**明示的な関連づけのない全てのサブネットに関連づけされる。**
- カスタムルートテーブル：VPC作成後に手動で作成するテーブル。
- サブネットルートテーブル：サブネットに関連づけされたルートテーブル。
- ルーティング優先度
  - 1.ロンゲストマッチ
  - 2.静的ルート
  - 3.プレフィックスリストルート
  - 4.伝搬されたルート（DirectConnect BGPルートなど）


## ＤＮＳ（AmazonProvidedDNS）


## ＤＨＣＰ（DHCP Options Set）


## セキュリティグループ、ＮＡＣＬ


## ゲートウェイ（ＩＧＷ、ＮＧＷ、ＶＧＷ、ＤＸＧＷ）


## ＶＰＣエンドポイント／Ｇａｔｅｗａｙエンドポイント


## ＤｉｒｅｃｔＣｏｎｎｅｃｔ


## Ｔｒａｎｓｉｔ Ｇａｔｅｗａｙ


