# Route53とは？
AWSが提供するDNSウェブサービス。AWSリソースの名前解決に利用する。基本的なDNS機能に加えて、WebAPIを利用した管理UI、非常に高い可用性と信頼性（稼働率100%）。

### 機能・特徴
- グローバル（特定のリージョンに依存しない）
- ドメインの購入、登録、管理（ドメインレジストラ、権威DNSサーバ）ができる
- リゾルバ機能（Amazon Route53 Resolver）
- DNSルーティング
- リソースヘルスチェック
- ハイブリッドクラウド機能（オンプレとの名前解決連携）

### 非機能
- フルマネージドサービス
- 可用性：分散型でグローバルに配置されたネームサーバー（ユーザーの近くにあるRoute53ネームサーバーがクエリを処理）。100％のSLAを保証。
- 拡張性：
- セキュリティ：DNSSEC、リソースアクセス制御（IAM）、DDoS攻撃や不正アクセスの兆候の検出（クエリログをCloudWatch連携で監視）
- 運用管理：クエリログ（S3保存）
- コスト：ホストゾーン数、DNSクエリ数、ルーティングクエリ数、Route53Resolver利用時間、トラフィックフロー有無で課金
<br><br>

## ドメインレジストラ
- ドメイン（例: example.com）を登録すると、Route 53は自動的にそのドメイン用のホストゾーンを作成してネームサーバー（NSレコード）を割当てる。
- ネームサーバー情報は自動的にTLD（トップレベルドメイン、例えば .com）を管理する権威DNSサーバーに登録される（プロパゲーションに24～48時間）
<br><br>

## ホストゾーン（権威DNSサーバ）
Route53のレコード管理単位（ゾーンファイルと似た概念。www.example.comの場合、"example.com" がホストゾーン名）
- Public Hosted Zone：インターネットなどのVPC外に公開されたドメインのDNSレコードを管理
- Private Hosted Zone：VPC内に公開されたドメインのDNSレコードを管理 ※AWS側で自動登録されるドメイン名（EC2インスタンスのローカルVPCドメイン名、ALBのバプリックDNSホスト名）は対象外
- AWS独自のAliasレコード
### Aliasレコード
AWSリソース（例: CloudFrontディストリビューション、S3バケット、ELBなど）に直接ドメインをマッピングするための特別なレコードタイプ。
ZoneApex（ドメイン名）に対するエイリアスを設定可能で、通常のCNAMEレコードと異なり追加のクエリコストが発生しない（DNSクエリがAWSリソースに直接ルーティングされる）
※CNAMEではZoneApexに別名はつけられない
<br><br>

## Amazon Route53 Resolver
VPCにデフォルトで提供されるリゾルバ。インターネット上に公開されたリソースやVPC内のリソースの名前解決ができる
- ローカルVPCドメイン名
- プライベートホストゾーンのレコード
- パブリックドメイン名（再帰的検索）
- オンプレDNSレコード（ハイブリッドクラウド機能

## ハイブリッドクラウド機能（オンプレとの名前解決連携）
VPCとオンプレ間の名前解決を可能にする、Route53Resolver拡張機能。「リゾルバールール」「インバウンドエンドポイント」「アウトバウンドエンドポイント」の3つのコンポーネントを使用。
- リゾルバールール：DNSクエリをどのDNSリゾルバーに転送するかのルール
- Inbound Endpoint：オンプレ →  VPCへのDNSクエリを可能にするインタフェースエンドポイント
- Outbound Endpoint：VPC → オンプレのDNSクエリを可能するインタフェースエンドポイント
<br><br>

## DNSルーティングポリシー
ユーザーのトラフィックを最適なエンドポイントに導くためのDNSクエリの返し方。各レコードに７つのルーティングポリシーを設定可能。
- シンプルルーティング：ドメイン名に紐づいた単一リソースのIPアドレスを返す
- 加重ルーティング：複数のIPアドレスに対して設定された重みづけに従ってIPアドレスを回答
- レイテンシールーティング：ユーザの位置情報から最も遅延の少ないリージョンにルーティング（グローバルに分散したユーザーに対して、最も迅速な応答を提供する場合）
- 地理的ルーティング（位置情報ルーティング）：地理的な位置情報（送信元IP）に基づいて、特定のエンドポイントにトラフィックをルーティングや制限（国や地域ごとに異なるコンテンツを提供する場合）
- 地理的近接性ルーティングポリシー：ユーザーの位置情報を元に、ユーザーと地理的に近いリージョンにあるリソースのIPアドレスを回答
- マルチバリュールーティング（ランダムラウンドロビン）：複数のリソースに対してヘルスチェックを行い、正常なリソースの中から最大8個のIPアドレスを回答
- フェイルオーバールーティング：プライマリレコードのヘルスチェック失敗時にセカンダリレコードを応答（DNSフェイルオーバーの実装）
<br><br>

## トラフィックフロー
ルーティングポリシーを組み合わせて設定するためのツール。シンプルルーティング以外の複数のルーティングポリシーの組み合わせが可能。

